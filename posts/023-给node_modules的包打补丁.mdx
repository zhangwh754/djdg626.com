---
title: 给node_modules的包打补丁
date: 2024/02/05 20:49:03
tag: node.js
description: 使用patch-package库给node_modules安装的包打补丁，使用postinstall钩子在npm i时应用修改
---

## 用途
项目中给node_modules中的包做出自定义修改，希望每次install时可以保留修改

## 步骤
1. 安装patch-package
``` bash
npm i -D patch-package
```

2. 修改package.json，设置install钩子（自带的钩子）
npm install后会自动运行install钩子
``` json
{
  "scripts": {
    "postinstall": "npx patch-package"
  },
}
```

3. 修改node_modules的包

4. 执行pacth-package命令
执行后会自动生成一个patches文件夹保存做出的修改
``` bash
# 如npx patch-package dayjs
npx patch-package [被修改的包名]
```

5. 重新安装后，做出的修改会自动应用
